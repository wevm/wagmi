# `amm.useRebalanceSwap`

Performs a rebalance swap between user and validator tokens. [Learn more about the Fee AMM](https://docs.tempo.xyz/protocol/fees/spec-fee-amm)

## Usage

::: code-group
```ts twoslash [example.ts]
// @twoslash-cache: {"v":1,"hash":"20c09f8cc1ff08a8faf46184bc97fb05274d872847ffff372666aabccf7c9bdd","data":"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"}
import { Hooks } from 'wagmi/tempo'
import { parseUnits } from 'viem'

const rebalanceSwapSync = Hooks.amm.useRebalanceSwapSync()

// Call `mutate` in response to user action (e.g. button click, form submission)
rebalanceSwapSync.mutate({
  amountOut: parseUnits('10.5', 6),
  to: '0x742d35Cc6634C0532925a3b844Bc9e7595f0bEbb',
  userToken: '0x20c0000000000000000000000000000000000000',
  validatorToken: '0x20c0000000000000000000000000000000000001',
})

console.log('Amount in:', rebalanceSwapSync.data?.amountIn)
// @log: 10605000n
```
<<< @/snippets/react/config-tempo.ts{ts} [config.ts]
:::

### Asynchronous Usage

The example above uses a `*Sync` variant of the action, that will wait for the transaction to be included before returning.

If you are optimizing for performance, you should use the non-sync `amm.rebalanceSwap` action and wait for inclusion manually:

```ts
import { Hooks } from 'wagmi/tempo'
import { Actions } from 'viem/tempo'
import { parseUnits } from 'viem'
import { useWaitForTransactionReceipt } from 'wagmi'

const rebalanceSwap = Hooks.amm.useRebalanceSwap()
const { data: receipt } = useWaitForTransactionReceipt({ hash: rebalanceSwap.data })

// Call `mutate` in response to user action (e.g. button click, form submission)
rebalanceSwap.mutate({
  amountOut: parseUnits('10.5', 6),
  to: '0x742d35Cc6634C0532925a3b844Bc9e7595f0bEbb',
  userToken: '0x20c0000000000000000000000000000000000000',
  validatorToken: '0x20c0000000000000000000000000000000000001',
})

if (receipt) {
  const { args: { amountIn } } 
    = Actions.amm.rebalanceSwap.extractEvent(receipt.logs)
```

## Return Type

See [TanStack Query mutation docs](https://tanstack.com/query/v5/docs/framework/react/reference/useMutation) for more info hook return types.

### data

See [Wagmi Action `amm.rebalanceSwap` Return Type](/tempo/actions/amm.rebalanceSwap#return-type)

### mutate/mutateAsync

See [Wagmi Action `amm.rebalanceSwap` Parameters](/tempo/actions/amm.rebalanceSwap#parameters)

## Parameters

### config

`Config | undefined`

[`Config`](https://wagmi.sh/react/api/createConfig#config) to use instead of retrieving from the nearest [`WagmiProvider`](https://wagmi.sh/react/api/WagmiProvider).

### mutation

See the [TanStack Query mutation docs](https://tanstack.com/query/v5/docs/framework/react/reference/useMutation) for more info hook parameters.

## Action

- [`amm.rebalanceSwap`](/tempo/actions/amm.rebalanceSwap)

