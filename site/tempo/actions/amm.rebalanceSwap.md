# `amm.rebalanceSwap`

Performs a rebalance swap between user and validator tokens. [Learn more about the Fee AMM](https://docs.tempo.xyz/protocol/fees/spec-fee-amm)

## Usage

::: code-group

```ts twoslash [example.ts]
// @twoslash-cache: {"v":1,"hash":"03eca6b0bce5a035e3fe6e9a4ef7135b82d5aafd661fa1e66fe554a04c7f92bb","data":"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="}
// @filename: config.ts
// @errors: 2322
import type { Config } from 'wagmi'
import { tempoTestnet } from 'wagmi/chains'
export const config = {} as Config<readonly [typeof tempoTestnet]>
// @filename: example.ts
// ---cut---
import { Actions } from 'wagmi/tempo'
import { parseUnits } from 'viem'
import { config } from './config'

const { amountIn, receipt } = await Actions.amm.rebalanceSwapSync(config, {
  amountOut: parseUnits('10.5', 6),
  to: '0x742d35Cc6634C0532925a3b844Bc9e7595f0bEbb',
  userToken: '0x20c0000000000000000000000000000000000000',
  validatorToken: '0x20c0000000000000000000000000000000000001',
})

console.log('Amount in:', amountIn)
// @log: 10605000n
```

<<< @/snippets/core/config-tempo.ts{ts twoslash} [config.ts]

:::

### Asynchronous Usage

The example above uses a `*Sync` variant of the action, that will wait for the transaction to be included before returning.

If you are optimizing for performance, you should use the non-sync `amm.rebalanceSwap` action and wait for inclusion manually:

```ts
import { Actions } from 'wagmi/tempo'
import { Actions as viem_Actions } from 'viem/tempo'
import { waitForTransactionReceipt } from 'wagmi/actions'
import { parseUnits } from 'viem'

const hash = await Actions.amm.rebalanceSwap(config, {
  amountOut: parseUnits('10.5', 6),
  to: '0x742d35Cc6634C0532925a3b844Bc9e7595f0bEbb',
  userToken: '0x20c0000000000000000000000000000000000000',
  validatorToken: '0x20c0000000000000000000000000000000000001',
})
const receipt = await waitForTransactionReceipt(config, { hash })

const { args: { amountIn } } 
  = viem_Actions.amm.rebalanceSwap.extractEvent(receipt.logs)
```

## Return Type

```ts
type ReturnType = {
  /** Amount of tokens required for the swap */
  amountIn: bigint
  /** Amount of output tokens received */
  amountOut: bigint
  /** Transaction receipt */
  receipt: TransactionReceipt
  /** Address that initiated the swap */
  swapper: Address
  /** Address of the user token */
  userToken: Address
  /** Address of the validator token */
  validatorToken: Address
}
```

## Parameters

### amountOut

- **Type:** `bigint`

Amount of user token to receive.

### to

- **Type:** `Address`

Address to send the user token to.

### userToken

- **Type:** `Address | bigint`

Address or ID of the user token.

### validatorToken

- **Type:** `Address | bigint`

Address or ID of the validator token.

<!--@include: @shared/tempo-write-parameters.md-->

## Viem

- [`amm.rebalanceSwap`](https://viem.sh/tempo/actions/amm.rebalanceSwap)
